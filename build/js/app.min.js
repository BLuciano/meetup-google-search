/*
 luciano-bruzzoni 2016-04-19 
*/
function setMeetupInfo(a){var b=$(".meetup-template").clone(),c=b.find(".title a");c.attr("href",a.link),c.text(a.name);var d=b.find(".members");d.text("Members: "+a.members);var e=b.find(".organizer");e.next().text(a.organizer.name);var f=b.find(".about");return f.html(a.description),b}function getMeetupLoc(a){return{lat:a.lat,lng:a.lon}}function googleMarkerIt(a,b,c,d){var e="ABCDEFGHIJKLMNOP",f=new google.maps.Marker({position:b,map:a,label:e[d%e.length],animation:google.maps.Animation.DROP,title:c});return f}function deleteMarkers(a){for(var b=0;b<a.length;b++)a[b].setMap(null)}$(function(){function a(a){var b=new google.maps.Map(document.getElementById("map"),{center:a,scrollwheel:!1,zoom:10});return b}function b(){function b(b){e={lat:b.coords.latitude,lng:b.coords.longitude},d=a(e)}function c(){f.html("Error trying to retrive location. Check your internet connection")}var f=$(".error");return navigator.geolocation?void navigator.geolocation.getCurrentPosition(b,c):void f.html("Sorry! Geolocation is not supported in your browser")}function c(a){var b,c;$(".meetup-results").html(""),deleteMarkers(f),f=[];var g={lon:e.lng,lat:e.lat,radius:30,key:"1164a772e5b1343e4b264e2f36e3e",category:a,page:16};$.ajax({url:"https://api.meetup.com/find/groups",data:g,dataType:"jsonp",type:"GET"}).done(function(a){$.each(a.data,function(a,e){c=setMeetupInfo(e),b=getMeetupLoc(e),console.log(b),$(".meetup-results").append(c[0]),f.push(googleMarkerIt(d,b,e.name,a))})}).fail(function(a){errorMsg.html("Error trying to retrieve Meetups information.")})}var d,e,f=[];b(),$(".search-form").submit(function(a){a.preventDefault();var b=$(".category").val();null!==b&&c(b)})});