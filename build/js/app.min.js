/*
 luciano-bruzzoni 2016-04-19 
*/
$(function(){function a(a){var b=new google.maps.Map(document.getElementById("map"),{center:a,scrollwheel:!1,zoom:10});return b}function b(){function b(b){h={lat:b.coords.latitude,lng:b.coords.longitude},g=a(h)}function c(){d.html("Error trying to retrive location. Check your internet connection")}var d=$(".error");return navigator.geolocation?void navigator.geolocation.getCurrentPosition(b,c):void d.html("Sorry! Geolocation is not supported in your browser")}function c(a){var b=$(".meetup-template").clone(),c=b.find(".title a");c.attr("href",a.link),c.text(a.name);var d=b.find(".members");d.text("Members: "+a.members);var e=b.find(".organizer");e.next().text(a.organizer.name);var f=b.find(".about");return f.html(a.description),b}function d(a){return{lat:a.lat,lng:a.lon}}function e(a){}function f(a){var b,f;$(".meetup-results").html("");var g={lon:h.lng,lat:h.lat,radius:30,key:"1164a772e5b1343e4b264e2f36e3e",category:a,page:16};$.ajax({url:"https://api.meetup.com/find/groups",data:g,dataType:"jsonp",type:"GET"}).done(function(a){$.each(a.data,function(a,g){f=c(g),b=d(g),$(".meetup-results").append(f[0]),e(b)})}).fail(function(a){errorMsg.html("Error trying to retrieve Meetups information.")})}var g,h;b(),$(".search-form").submit(function(a){a.preventDefault();var b=$(".category").val();null!==b&&f(b)})});